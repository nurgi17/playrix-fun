import{u as w,i as B,j as b,k as m,l as E,d as h,o as $,m as R,g as r,b as c,c as g,t as _,n as I,p as v,e as u,w as i,T as l,h as T,f as k}from"./index-KoQUmSj0.js";import{I as F}from"./game.dto-DJBcyaYA.js";import{_ as S}from"./PlayrixLogo.vue_vue_type_script_setup_true_lang-DwQBGFWb.js";import{_ as j}from"./Button.vue_vue_type_script_setup_true_lang-CTn0z3IM.js";function N(){const a=w(),s=B(),n=b(()=>{var o;return(o=s.currentCategory)==null?void 0:o.questions}),e=b(()=>s.currentCategory);function t(){s.setGamePoints(),n.value&&n.value[0].timer>0?a.push({name:"result",params:{type:F.Correct}}):a.push({name:"start"})}return{getQuestion:n,getCategory:e,done:t}}function O(a){const s=w(),n=m(),e=m(a),t=m({minutes:0,seconds:0}),o=b(()=>a*.1>e.value);E(()=>e.value,()=>{e.value<0&&(f(),s.push({name:"result",params:{type:F.Timeout}}))});function p(){t.value.minutes=Math.floor(e.value/60),t.value.seconds=e.value%60,e.value-=1}function d(){n.value=setInterval(()=>{p(),e.value<0&&f()},1e3)}function f(){clearInterval(n.value)}return{startTimer:d,stopTimer:f,timerObj:t,isRedTimer:o}}const A=h({__name:"QuestionTimer",props:{timer:{type:Number,default:0}},setup(a){const s=a,{startTimer:n,stopTimer:e,timerObj:t,isRedTimer:o}=O(s.timer);return $(()=>{n()}),R(()=>{e()}),(p,d)=>r(t).minutes>0||r(t).seconds>0?(c(),g("div",{key:0,class:I(["uppercase text-[128px] font-bold w-[606px] h-[167px] rounded-angels text-center",{"bg-[#EE2866] text-[#FFFFFF]":r(o),"bg-[#6450A2] text-white":!r(o)}])},_((r(t).minutes<10?"0":"")+r(t).minutes)+":"+_((r(t).seconds<10?"0":"")+r(t).seconds),3)):v("",!0)}}),V=h({__name:"Badge",props:{category:{type:Object,default:()=>{}}},setup(a){return(s,n)=>(c(),g("div",{class:I(["w-[706px] h-[140px] rounded-ang uppercase text-white font-bold text-[64px] text-center pt-5",{"bg-[#2AC4F4]":a.category.id%2!==0,"bg-[#EE2866]":a.category.id%2===0}])},_(a.category.name),3))}}),q=(a,s)=>{const n=a.__vccOpts||a;for(const[e,t]of s)n[e]=t;return n},z=q(V,[["__scopeId","data-v-0440376d"]]),G={class:"flex flex-col items-center w-[1080px] h-[1920px] max-w-[1080px] max-h-[1920px] bg-[url('/src/assets/img/back-main.svg')]"},M={class:"text-white text-[64px] font-bold text-center mt-[100px]"},D={key:0,class:"flex flex-col items-center mt-[131px]"},P={class:"text-white text-[48px] font-bold text-center mt-[50px]"},U=h({__name:"QuestionContainer",setup(a){const s=m(""),n=["Рандомайзер заданий","Загрузка...","Генерация задания..."],{getQuestion:e,getCategory:t,done:o}=N(),p=m(!0),d=m(!0),f=()=>{let x=0,y=0;const Q=setInterval(()=>{y++,s.value=n[x],x=(x+1)%n.length,y===1&&(d.value=!1)},400);setTimeout(()=>{var C;clearInterval(Q),s.value=e.value?(C=e.value[0])==null?void 0:C.question:"",p.value=!1},1500)};return(x,y)=>(c(),g("div",G,[u(l,{name:"bounce",appear:""},{default:i(()=>[u(S)]),_:1}),u(l,{name:"bottom-fade",appear:""},{default:i(()=>[u(z,{category:r(t)},null,8,["category"])]),_:1}),u(l,{name:"bounce",appear:"",onAfterEnter:f},{default:i(()=>[k("div",M,_(s.value),1)]),_:1}),u(l,{name:"bottom-fade",appear:""},{default:i(()=>[r(e)?(c(),g("div",D,[!d.value&&r(e)[0].timer>0?(c(),T(l,{key:0,name:"bounce",appear:""},{default:i(()=>[u(A,{timer:r(e)[0].timer},null,8,["timer"])]),_:1})):v("",!0),k("div",P,_(`Выполни задание и получи ${r(t).point}`),1)])):v("",!0)]),_:1}),p.value?v("",!0):(c(),T(l,{key:0,name:"bottom-fade",appear:""},{default:i(()=>[u(j,{class:"pt-[185px]",text:"готово",onClick:r(o)},null,8,["onClick"])]),_:1}))]))}}),W=h({__name:"QuestionIn",setup(a){return(s,n)=>(c(),T(U))}});export{W as default};
